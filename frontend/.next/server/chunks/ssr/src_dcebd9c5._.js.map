{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/stefan/Documenten/web-development/008change-my-image/frontend/src/env.ts"],"sourcesContent":["export const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080';\n"],"names":[],"mappings":";;;AAAO,MAAM,UAAU,6DAAmC","debugId":null}},
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///home/stefan/Documenten/web-development/008change-my-image/frontend/src/app/convert/page.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useState } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { API_URL } from \"../../env\";\nimport { Download, Upload, Wand2, AlertTriangle } from \"lucide-react\";\n\nconst FORMATS = [\"jpg\",\"jpeg\",\"png\",\"webp\",\"avif\",\"heic\",\"tiff\",\"bmp\",\"gif\",\"svg\"];\n\ntype Job = {\n  file: File;\n  status: 'queued' | 'running' | 'done' | 'error';\n  url?: string;\n  error?: string;\n};\n\nexport default function ConvertPage() {\n  const { data: session } = useSession();\n  const [target, setTarget] = useState('webp');\n  const [quality, setQuality] = useState(85);\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const token = (session as any)?.idToken;\n\n  const onDrop = (acceptedFiles: File[]) => {\n    const newJobs = acceptedFiles.map((f) => ({ file: f, status: 'queued' } as Job));\n    setJobs((prev) => [...prev, ...newJobs]);\n  };\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop, multiple: true });\n  const dropClass = isDragActive ? 'border-sky-500 bg-sky-50' : 'border-slate-300';\n\n  const start = async () => {\n    const pending = jobs.filter(j => j.status === 'queued');\n    for (const j of pending) {\n      setJobs((prev) => prev.map(x => x === j ? { ...x, status: 'running' } : x));\n      const form = new FormData();\n      form.append('file', j.file);\n      form.append('to', target);\n      form.append('quality', String(quality));\n      try {\n        const res = await fetch(`${API_URL}/api/convert`, {\n          method: 'POST',\n          headers: token ? ({ Authorization: `Bearer ${token}` } as HeadersInit) : undefined,\n          body: form,\n        });\n        if (res.status === 401) throw new Error('Please sign in with Google to convert.');\n        if (res.status === 402) throw new Error('Limit reached. Purchase more conversions for $1 = 5 images.');\n        if (!res.ok) throw new Error(`Conversion failed: ${res.status}`);\n        const blob = await res.blob();\n        const url = URL.createObjectURL(blob);\n        setJobs((prev) => prev.map(x => x === j ? { ...x, status: 'done', url } : x));\n      } catch (e: any) {\n        setJobs((prev) => prev.map(x => x === j ? { ...x, status: 'error', error: e.message } : x));\n      }\n    }\n  };\n\n  useEffect(() => {\n  }, [token]);\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-xl font-semibold text-sky-800 flex items-center gap-2\">\n        <Wand2 className=\"text-sky-600\" /> Convert Images\n      </h1>\n      <div className=\"rounded-lg border bg-white p-4\">\n        <div className=\"grid md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm text-slate-600 mb-1\">Target format</label>\n            <select value={target} onChange={(e)=>setTarget(e.target.value)} className=\"w-full rounded-md border-slate-300\">\n              {FORMATS.map(f => <option key={f} value={f}>{f.toUpperCase()}</option>)}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm text-slate-600 mb-1\">Quality</label>\n            <input type=\"range\" min={1} max={100} value={quality} onChange={(e)=>setQuality(Number(e.target.value))} className=\"w-full\" />\n            <div className=\"text-xs text-slate-500 mt-1\">{quality}</div>\n          </div>\n          <div className=\"flex items-end\">\n            <button onClick={start} className=\"inline-flex items-center gap-2 rounded-md bg-sky-600 px-4 py-2 text-white hover:bg-sky-700\">\n              <Wand2 size={16} /> Convert\n            </button>\n          </div>\n        </div>\n        <div {...getRootProps()} className={\"mt-4 border-2 border-dashed rounded-lg p-8 text-center \" + dropClass}>\n          <input {...getInputProps()} />\n          <div className=\"flex items-center justify-center gap-2 text-slate-600\">\n            <Upload /> Drag & drop images here, or click to select\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid gap-3\">\n        {jobs.map((j, idx) => (\n          <div key={idx} className=\"rounded-md border bg-white p-3 flex items-center justify-between\">\n            <div className=\"text-sm\">\n              <div className=\"font-medium\">{j.file.name}</div>\n              <div className=\"text-xs text-slate-500\">{Math.round(j.file.size/1024)} KB â€” {j.status}</div>\n              {j.status === 'error' && <div className=\"text-rose-600 flex items-center gap-1 text-xs mt-1\"><AlertTriangle size={14}/> {j.error}</div>}\n            </div>\n            <div>\n              {j.status === 'done' && j.url && (\n                <a href={j.url} download={`converted.${target}`} className=\"inline-flex items-center gap-1 rounded-md bg-emerald-600 px-3 py-1.5 text-white hover:bg-emerald-700\">\n                  <Download size={16} /> Download\n                </a>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}